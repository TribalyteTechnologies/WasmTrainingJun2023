<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Example Embind (C++ - Javascript)</title>
</head>
<body>
        <ul>
          <select id="departament">
            <option>Tribalyte Tech</option>
            <option>Tribalyte Ideas</option>
          </select>
         <li>
           <label for="name">Name: </label>
           <input type="text" maxlength="5" id="name" name="userName">
         </li>
          <li>
            <label for="lastname">Last Name: </label>
            <input type="text" id="lastname" name="userLastname">
          </li>
         <li>
           <label for="mail">Mail: </label>
           <input type="email" id="mail" name="userMail">
         </li>
         <li>
           <label for="message">Message: </label>
           <input type="message" id="message" name="userMessage"></textarea>
         </li>
        </ul>

       <button id="sendbtn" onclick="sendMessage()">Send</button>

       <script src="build/embindExample.js"></script>
       <script>
        function sendMessage(){
          var departamentIdVar = document.getElementById("departament");
          var nameVar = document.querySelector("#name").value;
          var lastnameVar = document.querySelector("#lastname").value;
          var mailVar = document.querySelector("#mail").value;
          var messageVar = document.querySelector("#message").value;

          var instance = new Module["Message"]();
          const messageItems = {name: nameVar, lastName: lastnameVar, mail: mailVar, message: messageVar};
          const departmentId = (departamentIdVar.selectedIndex)?(Module.Tribalyte.Ideas):(Module.Tribalyte.Tech);
          instance["newMessage"](messageItems, departmentId);
          instance.delete();
        }
      </script>
</body>
</html>
